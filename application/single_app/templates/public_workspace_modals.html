<!-- public_workspace_modals.html -->
<!-- Public Workspace Management Modal -->
<div class="modal fade" id="publicWorkspaceManagementModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="bi bi-globe me-2"></i>Manage Public Workspace
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Workspace Info Section -->
                <div class="row mb-4">
                    <div class="col-12">
                        <h6 class="fw-bold">Workspace Information</h6>
                        <div class="card bg-light">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <strong>Name:</strong> <span id="modalWorkspaceName">-</span>
                                    </div>
                                    <div class="col-md-6">
                                        <strong>Owner:</strong> <span id="modalWorkspaceOwner">-</span>
                                    </div>
                                </div>
                                <div class="row mt-2">
                                    <div class="col-md-6">
                                        <strong>Members:</strong> <span id="modalWorkspaceMembers">-</span>
                                    </div>
                                    <div class="col-md-6">
                                        <strong>Documents:</strong> <span id="modalWorkspaceDocuments">-</span>
                                    </div>
                                </div>
                                <div class="row mt-2">
                                    <div class="col-md-6">
                                        <strong>Created:</strong> <span id="modalWorkspaceCreated">-</span>
                                    </div>
                                    <div class="col-md-6">
                                        <strong>Workspace ID:</strong> <small class="text-muted" id="modalWorkspaceId">-</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Workspace Status Control -->
                <div class="row mb-4">
                    <div class="col-12">
                        <h6 class="fw-bold">Workspace Status Control</h6>
                        <div class="card">
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">Workspace Status</label>
                                    <select class="form-select" id="workspaceStatusSelect">
                                        <option value="active">Active</option>
                                        <option value="locked">Locked (Read-only)</option>
                                        <option value="upload_disabled">Upload Disabled</option>
                                        <option value="inactive">Inactive</option>
                                    </select>
                                    <div class="form-text" id="workspaceStatusHelpText">
                                        <strong>ðŸŸ¢ Active:</strong> Full functionality enabled. Members can upload documents, chat, and search documents. All workspace features work normally.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Workspace Ownership -->
                <div class="row mb-4">
                    <div class="col-12">
                        <h6 class="fw-bold">Workspace Ownership</h6>
                        <div class="card">
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">Transfer Ownership</label>
                                    <select class="form-select" id="workspaceOwnershipSelect">
                                        <option value="">Keep current owner</option>
                                        <option value="admin">Take Administrator Ownership</option>
                                        <option value="transfer">Transfer to Another User</option>
                                    </select>
                                </div>
                                <div class="mb-3" id="transferUserWorkspace" style="display: none;">
                                    <label class="form-label">New Owner</label>
                                    <select class="form-select" id="workspaceNewOwnerSelect">
                                        <option value="">Select a workspace member...</option>
                                    </select>
                                    <div class="form-text">Only current workspace admins or document managers can become the owner.</div>
                                </div>
                                <div class="mb-3" id="ownershipReasonWorkspace" style="display: none;">
                                    <label class="form-label">Reason for Ownership Change <span class="text-danger">*</span></label>
                                    <textarea class="form-control" id="workspaceOwnershipReason" rows="3" 
                                              placeholder="Explain why this ownership change is necessary..."></textarea>
                                    <div class="form-text text-info">
                                        <i class="bi bi-info-circle me-1"></i>
                                        Ownership changes require approval from the workspace owner or another admin.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Member Management -->
                <div class="row mb-4">
                    <div class="col-12">
                        <h6 class="fw-bold">Member Management</h6>
                        <div class="card">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <button type="button" class="btn btn-info w-100" id="manageWorkspaceMembersBtn">
                                            <i class="bi bi-people me-2"></i>View & Manage Members
                                        </button>
                                        <small class="text-muted">Add/remove members and assign roles</small>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <button type="button" class="btn btn-secondary w-100" id="viewWorkspaceActivityBtn">
                                            <i class="bi bi-activity me-2"></i>View Workspace Activity
                                        </button>
                                        <small class="text-muted">See detailed workspace activity timeline</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Dangerous Actions -->
                <div class="row mb-4">
                    <div class="col-12">
                        <h6 class="fw-bold text-danger">Dangerous Actions</h6>
                        <div class="card border-danger">
                            <div class="card-body">
                                <div class="alert alert-warning">
                                    <i class="bi bi-exclamation-triangle me-2"></i>
                                    These actions cannot be undone. Please proceed with caution.
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <button type="button" class="btn btn-outline-danger w-100" id="deleteWorkspaceDocumentsBtn">
                                            <i class="bi bi-trash me-2"></i>Delete All Documents
                                        </button>
                                        <small class="text-muted">Remove all files but keep workspace structure</small>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <button type="button" class="btn btn-danger w-100" id="deleteWorkspaceBtn">
                                            <i class="bi bi-trash-fill me-2"></i>Delete Entire Workspace
                                        </button>
                                        <small class="text-muted">Permanently delete workspace and all content</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="saveWorkspaceChangesBtn">
                    <i class="bi bi-check-lg me-1"></i>Save Changes
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Delete Workspace Documents Confirmation Modal -->
<div class="modal fade" id="deleteWorkspaceDocumentsModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-warning text-dark">
                <h5 class="modal-title">
                    <i class="bi bi-exclamation-triangle me-2"></i>Delete All Workspace Documents
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete all documents in this public workspace?</p>
                <div class="alert alert-warning mb-0">
                    <i class="bi bi-exclamation-circle me-2"></i>
                    <strong>Warning:</strong> All documents will be permanently deleted. The workspace structure will remain intact.
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteWorkspaceDocumentsBtn">
                    <i class="bi bi-trash me-1"></i>Delete All Documents
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Delete Workspace Confirmation Modal -->
<div class="modal fade" id="deleteWorkspaceModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">
                    <i class="bi bi-exclamation-triangle me-2"></i>Delete Entire Workspace
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this public workspace?</p>
                <div class="alert alert-danger mb-0">
                    <i class="bi bi-exclamation-circle me-2"></i>
                    <strong>Warning:</strong> The workspace, all members, and all documents will be permanently deleted. This action cannot be undone.
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteWorkspaceBtn">
                    <i class="bi bi-trash me-1"></i>Delete Workspace
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Workspace Activity Modal -->
<div class="modal fade" id="workspaceActivityModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="bi bi-activity me-2"></i>Workspace Activity Timeline
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row mb-3">
                    <div class="col-md-8">
                        <h6 id="activityWorkspaceName">Workspace Activity</h6>
                    </div>
                    <div class="col-md-4 text-end">
                        <select class="form-select form-select-sm" id="activityWorkspaceTimeRange">
                            <option value="7">Last 7 days</option>
                            <option value="30" selected>Last 30 days</option>
                            <option value="90">Last 90 days</option>
                            <option value="all">All time</option>
                        </select>
                    </div>
                </div>
                
                <div class="timeline-container" style="max-height: 400px; overflow-y: auto;">
                    <div id="activityWorkspaceTimeline">
                        <!-- Activity timeline will be populated here -->
                        <div class="text-center py-4">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <div class="mt-2">Loading activity...</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-primary" id="exportWorkspaceActivityBtn">
                    <i class="bi bi-download me-1"></i>Export Activity
                </button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Workspace Members Management Modal -->
<div class="modal fade" id="workspaceMembersModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="bi bi-people me-2"></i>Manage Workspace Members
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row mb-3">
                    <div class="col-md-6">
                        <h6 id="membersWorkspaceName">Workspace Members</h6>
                    </div>
                    <div class="col-md-6 text-end">
                        <button type="button" class="btn btn-primary btn-sm" id="addWorkspaceMemberBtn">
                            <i class="bi bi-person-plus me-1"></i>Add Member
                        </button>
                    </div>
                </div>
                
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Role</th>
                                <th class="text-end">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="workspaceMembersTableBody">
                            <!-- Members will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
